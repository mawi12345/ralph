# Ralph

A SSR/Static MDX project for teachers.
Create learning content such as exercises, schoolwork, and other materials with ease.

Most changes should only be made in the `pages` directory.

## Language

This project is used in a Mittelschule (Österreich).
All communication and content on the pages should be in German.

- **Content**: All MDX content (pages, text) should be written in German
- **Git**: All git messages and PRs should be in German
- **Code**: Components and code remain in English

## Tech Stack

- React 19 with Vite 7
- MDX for content pages
- MathJax for math rendering (via remark-math and rehype-mathjax)
- SSR with code generation for route discovery and static HTML generation for each route

## MathJax

- Use `\cdot` for multiplications and `\dfrac` for fractions
- Format big numbers with thousands separators (groups of 3) with a space `\,`. Example $$ 12\,300\,000\,000\,000 \cdot 60 \cdot 60 = 44\,280\,000\,000\,000\,000 $$
- Use `\underline{\hspace{12mm}}` for fill in the blank questions

## MS Forms format (Quiz)

- Look at `ms-forms-example.mdx` and follow the same format
- The correct answer has to be the first! (will be scrambled later)

## uebung format

- Each `<Exercise>` includes the question text and the solution
- The answer must be on the same line
- Exercise with multi step solutions should use <br /> for line breaks and start with a line break
- **Proofs (A: and E:)**: Always show the entire calculation process with all intermediate steps:
  1. Substitute variables with explicit factors (e.g., `3 \cdot 2` not just `6`)
  2. Evaluate powers (e.g., `2^2 = 4`)
  3. Calculate each multiplication
  4. Show the final result

### Punkte-Schema

Jede Übung erhält Punkte basierend auf Schwierigkeit und Anzahl der Rechenschritte. Die Punkte werden mit `<Points>X</Points>` nach der `</Solution>` angegeben.

### Punkterichtlinien:

| Punkte | Beschreibung |
|--------|--------------|
| 1 | Einfache einschrittige Aufgaben (r/f Fragen, Formelerkennung, einfache Gleichungen ohne Probe) |
| 2 | Einfache Umwandlungen, Vereinfachungen, Verteilungsgesetz, binomische Formeln direkt anwenden |
| 3 | Mehrschrittige Aufgaben (Klammern auflösen + vereinfachen, Gleichungen mit Probe, Faktorzerlegung) |
| 4 | Komplexere Terme/Gleichungen (Variable auf beiden Seiten, geschachtelte Klammern, Textaufgaben) |
| 5-6 | Aufgaben mit mehreren Techniken kombiniert oder ausführlicher Probe (A: und E:) |
| 6-8 | Sehr komplexe Aufgaben mit vollständiger Probe und mehreren Zwischenschritten |

### Beispiele:

```mdx
<!-- 1 Punkt: Einfache Gleichung -->
<Exercise>
$$ x + 5 = 12 $$ <Solution>$$ x = 7 $$</Solution>
<Points>1</Points>
</Exercise>

<!-- 3 Punkte: Gleichung mit Probe -->
<Exercise>
$$ 2x + 5 = 13 $$ <Solution><br />$$ 2x = 8 $$<br />$$ x = 4 $$</Solution><br />Probe: <Solution>$$ 2 \cdot 4 + 5 = 13 $$ &#10003;</Solution>
<Points>3</Points>
</Exercise>

<!-- 6 Punkte: Komplexe Aufgabe mit A: und E: Probe -->
<Exercise>
$$ (x + 5)^2 - 5x + x^2 = $$ <Solution>...</Solution><br />A: <Solution>...</Solution><br />E: <Solution>...</Solution>
<Points>6</Points>
</Exercise>
```

## Commands

- `bun run dev` - Start development server
- `bun run test` - Runs codegen and type checking 
- `bun run build` - Build for production (generates static HTML for all routes)

## Project Structure

- `src/pages/` - MDX content pages
- `src/components/` - Reusable components
- `src/App.tsx` - Main app component with routing
- `src/entry-client.tsx` - Client-side hydration entry point
- `src/entry-server.tsx` - Server-side rendering entry point
- `codegen.ts` - Route discovery 
- `prerender.ts` - Static HTML generation script
- `public/` - Static assets

## Adding new pages

Use a unique slug as filename in the page directory.
Start the mdx file with const exports for `title`, `grade`, `subject` and `format`.

Example:
```
export const title = "Gleichungen - Übung";
export const grade = 7;
export const subject = "Mathematik";
export const format = "uebung";
```

Valid formats are:
 - uebung
 - schularbeit
 - ms-forms
 - lernkarten

Do not edit `pages.ts`! The file will be generated by the build and the test script.

## Testing

- run `bun run test` to run tsc type checking. Fix all warnings.
- run `bun run build` and ensure not warnings or errors happen during build
